# 音声操作アプリケーション

## 概要
このプロジェクトは、音声認識を利用してデバイスを制御するアプリケーションです。ユーザーは音声コマンドを使用して、SwitchBotデバイスやカスタムデバイスを操作したり、AIからの応答を受け取ったりすることができます。主な機能には、音声認識でデバイス制御、天気情報の取得、Chromecastメディア制御が含まれています。

## 前提条件
- Python 3.7以上
- マイクロフォンが接続されたデバイス
- VOSKの日本語音声認識モデルをダウンロードされている必要があります。

## インストール手順
1. リポジトリをクローンします。
   ```bash
   git clone https://github.com/ryo08271154/voice_control.git
   cd voice_control
   ```

2. 必要なライブラリをインストールします。
   ```bash
   pip install -r requirements.txt
   ```

3. VOSKの日本語音声認識モデルをダウンロードし、任意の場所に配置します。
   1. [VOSKモデルページ](https://alphacephei.com/vosk/models)から日本語音声認識モデルをダウンロード
   2. ダウンロードしたファイルを解凍
   3. 解凍したフォルダを任意の場所に配置
   モデルのパスは後でedit_config.pyの設定時に指定します。

4. アプリケーションの設定を行います。
   ```bash
   python edit_config.py
   ```
   以下の情報の入力を求められます：
   - VOSKモデルのパス
   - Gemini APIキー
   - Geminiモデル名
   - Geminiシステム指示
   - 音声読み上げサーバーURL
   - 使用するプラグインの選択と設定

   設定が完了すると、`config/config.json`が自動的に作成されます。
   - **MCPの設定（任意）**:
      GeminiでMCPを使用する場合、`config/config.json`に手動で追加する必要があります。
     ```json
     {
       "mcpServers": {

       }
     }
     ```

5. 必要に応じて、カスタムデバイスやシーンを設定できます。
   `config`ディレクトリ内の以下のJSONファイルを編集してください：

   - **`custom_scenes.json`**: カスタムシーンの設定
     ```json
     {
       "sceneList": [
         {
           "sceneName": "シーン名",
           "command": "実行するコマンド"
         }
       ]
     }
     ```

   - **`custom_devices.json`**: カスタムデバイスの設定
     ```json
     {
       "deviceList": [
         {
           "deviceName": "デバイス名",
           "turnOn": "オンにするコマンド",
           "turnOff": "オフにするコマンド"
         }
       ]
     }
     ```
   - **`custom_routines.json`**: カスタムルーチンの設定
     ```json
     {
       "routineList": [
         {
           "routineName": "おはよう",
           "commands": [
             "ライトつけて",
             "エアコンつけて",
             "今日の天気は"
           ]
         }
       ]
     }
     ```

## 使用方法

### コマンドラインから実行
```bash
python voice_control.py
```

### GUIアプリケーションとして実行
```bash
python control.py
```

### 音声コマンド例

- **デバイスの操作**
  - 「電気をつけて」：電気デバイスの電源をオンにします
  - 「テレビを消して」：テレビの電源をオフにします
  - 「エアコンをつけて」：エアコンをオンにします

- **メディア操作（Chromecast）**
  - 「再生して」：メディアの再生を開始します
  - 「一時停止して」：メディアを一時停止します
  - 「停止して」：メディアを停止します
  - 「音量を上げて」：音量を上げます
  - 「音量を下げて」：音量を下げます
  - 「10秒戻して」：10秒巻き戻します
  - 「30秒スキップして」：30秒早送りします

- **時間や日付の確認**
  - 「今何時？」：現在の時刻を教えてくれます
  - 「今日は何日？」：現在の日付を教えてくれます

- **天気情報の取得**
  - 「今日の天気は？」：現在の天気情報を取得します
  - 「明日の天気は？」：翌日の天気情報を取得します

- **AI対話**
  - 「○○とは何ですか？」：様々な質問にAIが回答します

## 必要なAPIキー
必須:
- **Google Generative AI (Gemini)**: AI対話機能に使用

任意:
- **OpenWeatherMap API**: 天気情報の取得機能を使用する場合に必要
- **SwitchBot API**: SwitchBotデバイスを制御する場合に必要

## 操作対応デバイス
- SwitchBot対応デバイス（ライト、テレビ、エアコンなど）
- Chromecast（メディア再生、音量制御）
- カスタムデバイス（コマンドライン経由で制御可能なデバイス）

## 注意事項
- 音声認識にはVOSKライブラリを使用しているため、インターネット接続は必須ではありませんが、各種API機能を使用する場合は接続が必要です
- マイクロフォンへのアクセス許可が必要です
